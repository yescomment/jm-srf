---
import { Image } from 'astro:assets'
import neighborhoodsImg from '../../assets/imagery/map/pexels-michael-tuszynski-2255938.jpg';
---
<section id="srf-map-diagram">
  <a class="icon" href="#neighborhoods">Neighborhoods</a>
  <a class="icon" href="#businesses">Businesses</a>
  <a class="icon" href="#housing">Housing</a>
  <a class="icon" href="#government">Government</a>
  <a class="icon" href="#healthcare">Healthcare</a>
  <a class="icon" href="#culture">Culture</a>
</section>
<section id="srf-map-body">
  <div class="srf-map-element" id="neighborhoods">
    <div class="image">
      <Image src={neighborhoodsImg} alt="Top-down view of a residential neighborhood"/>
    </div>
    <div class="text">
      <h3>Safe Neighborhoods & Community Autonomy</h3>
      <p>Residents should feel secure and safe in their home and in their neighborhood, free from the presence of violence and/or overly policed environments.</p>
      <p>Neighbors should have the collective autonomy and resources to find solutions to their problems, with the unencumbered and “no-strings-attached” support of private and public partners.</p>
    </div>
  </div>

  <div class="srf-map-element" id="neighborhoods">
    <div class="image">
      <Image src={neighborhoodsImg} alt="Top-down view of a residential neighborhood"/>
    </div>
    <div class="text">
      <h3>Safe Neighborhoods & Community Autonomy</h3>
      <p>Residents should feel secure and safe in their home and in their neighborhood, free from the presence of violence and/or overly policed environments.</p>
      <p>Neighbors should have the collective autonomy and resources to find solutions to their problems, with the unencumbered and “no-strings-attached” support of private and public partners.</p>
    </div>
  </div>
  <div class="srf-map-element" id="neighborhoods">
    <div class="image">
      <Image src={neighborhoodsImg} alt="Top-down view of a residential neighborhood"/>
    </div>
    <div class="text">
      <h3>Safe Neighborhoods & Community Autonomy</h3>
      <p>Residents should feel secure and safe in their home and in their neighborhood, free from the presence of violence and/or overly policed environments.</p>
      <p>Neighbors should have the collective autonomy and resources to find solutions to their problems, with the unencumbered and “no-strings-attached” support of private and public partners.</p>
    </div>
  </div>
  <div class="srf-map-element" id="neighborhoods">
    <div class="image">
      <Image src={neighborhoodsImg} alt="Top-down view of a residential neighborhood"/>
    </div>
    <div class="text">
      <h3>Safe Neighborhoods & Community Autonomy</h3>
      <p>Residents should feel secure and safe in their home and in their neighborhood, free from the presence of violence and/or overly policed environments.</p>
      <p>Neighbors should have the collective autonomy and resources to find solutions to their problems, with the unencumbered and “no-strings-attached” support of private and public partners.</p>
    </div>
  </div>
</section>

</div>

  <div slot="text" id="srf-map-descriptions">

    <div class="key" id="businesses">
      <h3>Plentiful Employment and Business Opportunities</h3>
      <p>Residents must have the basic means to acquire and access work opportunities within their community that provide a safety net, while working to develop and  invest in wealth-building opportunities.</p>
      <p>Jobs should have basic benefits, career building opportunities, wealth-building opportunities, and a fair and engaging workplace.</p>
      <p>Communities should have a critical mass of business ownership to prevent economic leakage by ensuring that dollars and resources remain in the community and that long-term wealth generation can be built.</p>
      <p>Local businesses should be competitive and integrated into their regional economies. They should be included in the finance, technology, and information networks regarding trading partners to learn how information flows to both existing businesses and new entrepreneurs.</p>
    </div>

    <div class="key" id="housing">
      <h3>Safe, Affordable and Secure Housing</h3>
      <p>Well-maintained housing should be affordable for current residents and market rate financing and insurance should be affordable for housing investments.</p>
    </div>

    <div class="key" id="government">
      <h3>Truly Representative Local Governments</h3>
      <p>Neighborhoods should have equal voice in determining local political outcomes without systemic barriers and, as tax-paying citizens, receive quality services without having to spend continuous energy and resources on advocacy.</p>
      <p>Communities should be <strong>free of predatory revenue streams</strong> collected by municipalities, counties, and cities, and predatory financial institutions.</p>

      <h3>Safe and Effective Schools</h3>
      <p>Schools should provide students civics lessons and teach them how our government entities operate. Students should acquire the skills and necessary habits to make educated decisions and to positively contribute to our democratic system.</p>
      <p>Students should acquire levels of academic proficiency needed to attend college or  secure some type of post-secondary vocational certification with labor market value that leads to gainful employment and a career of their choosing.</p>
      <p>School curriculums and instructions should be culturally competent and responsive, while ensuring that students learn social connectivity and self-efficacy/agency.</p>

      <h3>A Fair Justice System</h3>
      <p>People should be tried by a jury of their peers and people from their immediate communities when they are brought to trial.</p>
      <p>Neighbors should be supported by the criminal justice system in their community-based (W)Health justice practices and self-policing activity.</p>
    </div>

    <div class="key" id="healthcare">
      <h3>Access to Reliable and Affordable Health Care</h3>
      <p>Reliable and affordable health care should be readily available with quality physicians and practitioners focused on the health and well-being of their patients through quality health care, nutritious food, and physical activity.</p>
      <p>Communities should have access to fresh, affordable produce and local groceries in close proximity to where they live.</p>
    </div>

    <div class="key" id="culture">
      <h3>Control over Their Public Identity and Cultural Institutions</h3>
      <p>Communities should have equal representation in media outlets while being able to offer comprehensive narratives on their community and the way media represents them to external parties.</p>
      <p>Public arts and cultural institutions should have dedicated spaces that reflect community interest. Institutions that celebrate a community’s culture and heritage should be readily available, as should creative spaces that expose residents to a diversity of different cultural, ethnic, social, and sexual orientations.</p>
    </div>

  </div>
</div>

<style lang="scss">
  #srf-map-diagram {
    background: var(--color-light-tinted);
    display: flex;
    justify-content: space-between;
    position: sticky;
    top: 50px;
    padding: 2rem;
    border-bottom: 1rem solid var(--color-primary);
    overflow-x: scroll;

    .icon {
      box-sizing: border-box;
      background-color: var(--color-light);
      padding: 1rem;
    }
  }

  .srf-map-element {
    display: flex;
    flex-direction: row-reverse;
    min-height: 100dvh;
    overflow-y: scroll;

    .image, .text {
      width: 50%;
    }

    .image {
      img {
        position: sticky;
        top: 50vh;
        fit-content: cover;
        height: 100%;
      }
    }

    .text {

    }
  }
</style>

<script is:inline>
  let mapKeys = document.querySelectorAll('#srf-map-descriptions div.key')
  let mapSvgElement = document.querySelector('#whealthy-community-map')
  let observer = new window.IntersectionObserver(updateMap, {
    rootMargin: '-50% 0% -50% 0%',
  })

  function updateMap(entries, observer) {
    console.log(entries)
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('active')
      } else {
        entry.target.classList.remove('active')
      }
    })
  }

  mapKeys.forEach(mapKey => {
    observer.observe(mapKey)
  })
</script>